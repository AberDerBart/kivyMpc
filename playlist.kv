#:kivy 1.0.6
#:import PlaylistWidget Playlist.PlaylistWidget
#:import PlaylistItem Playlist.PlaylistItem
#:import iFace Interface.iFace
#:import SimpleListAdapter kivy.adapters.simplelistadapter.SimpleListAdapter
#:include player.kv

<PlaylistItem>:
	Label:
		background_color: (0,0,0,0)
		size_hint_x: 9
		text: root.displayText()
		font_size: self.height * 2/3
		text_size: self.size
		shorten: True
		shorten_from: "right"
		bold: int(iFace.currentId)==int(root.songId)
	Button:
		background_color: (0,0,0,0)
		text: u"\u25B6"
		font_name: "/usr/share/fonts/TTF/Symbola.ttf"
		on_press: root.playAction()
		font_size: self.height * 2/3
		text_size: self.size
	Button:
		background_color: (0,0,0,0)
		text: u"\u2716"
		font_name: "/usr/share/fonts/TTF/Symbola.ttf"
		on_press: root.delAction()
		font_size: self.height * 2/3
		text_size: self.size

<PlaylistWidget>:
	canvas:
		Color:
			rgb: 0,0,0
		Rectangle:
			pos: self.pos
			size: self.size
	BoxLayout:
		orientation:"vertical"
		pos: root.pos
		size: root.size
		size: root.size
		padding: self.height/20
		spacing: self.height/20

		ListView:
			size_hint_y: 8
			selected_color: 1,0,0,1
			deselected_color: 0,1,0,1
			adapter:
				SimpleListAdapter(
				data=iFace.playlist,
				cls=PlaylistItem,
				args_converter=lambda row_index,x: {'text':x, 'size_hint_y':None, 'height': 50}
				)

		BoxLayout:
			Button:
				background_color: (0,0,0,0)
				text:u"\u2B05"
				font_name: "/usr/share/fonts/TTF/Symbola.ttf"
				on_press: root.manager.current="player"
				font_size: self.height *2/3
			Widget:
			PlaybackButtons:
				size_hint_x:2
			Widget:
				size_hint_x:2
